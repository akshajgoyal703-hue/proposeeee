<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>Will You Be Mine ‚ù§Ô∏è</title>

<style>
body{
    margin:0;
    background:radial-gradient(circle at top,#160026,#000);
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    overflow:hidden;
    font-family:Segoe UI, sans-serif;
    position:relative;
}

/* Responsive canvas */
canvas{
    width:95vw;
    height:50vh;
    max-width:900px;
    max-height:450px;
    background:linear-gradient(to top,#060010,#140022);
    box-shadow:0 0 40px #ff5fa2;
    border-radius:14px;
}

/* Buttons */
#buttons{
    position:absolute;
    bottom:20px;
    display:none;
    gap:14px;
    flex-wrap:wrap;
}
button{
    padding:10px 22px;
    font-size:16px;
    border:none;
    border-radius:30px;
    cursor:pointer;
}
#yes{ background:#ff5fa2; color:white; }
#no{ background:#333; color:white; }

/* Videos */
video{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    width:95vw;
    max-height:70vh;
    border-radius:14px;
    display:none;
    z-index:100;
}

/* Message box */
#messageBox{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    background:#140022;
    color:#ffd6ef;
    padding:24px;
    border-radius:18px;
    font-size:16px;
    line-height:1.5;
    max-width:90vw;
    text-align:left;
    display:none;
    box-shadow:0 0 30px #ff5fa2;
    z-index:200;
}
#messageBox button{
    display:block;
    margin:20px auto 0 auto;
    padding:10px 25px;
    font-size:15px;
    border:none;
    border-radius:12px;
    background:#ff5fa2;
    color:white;
    cursor:pointer;
}
</style>
</head>

<body>

<canvas id="c"></canvas>

<div id="buttons">
    <button id="yes">YES ‚ù§Ô∏è</button>
    <button id="no">NO üíî</button>
</div>

<video id="yesVideo" src="myYesVideo.mp4" controls></video>
<video id="noVideo" src="myNoVideo.mp4" controls></video>

<div id="messageBox">
I just want to say something that‚Äôs been in my heart.<br><br>
This is not a proposal, and I‚Äôm not asking you to rush or commit right now.<br><br>
I choose you. I like you, admire you, and care about you in a calm, real way.<br><br>
I‚Äôm happy taking things slowly, at your pace. I just didn‚Äôt want to stay silent.<br><br>
<button id="closeMessage">Close</button>
</div>

<audio id="bgMusic" src="mySong.mp3" loop></audio>

<script>
const c = document.getElementById("c");
const ctx = c.getContext("2d");
const dpr = window.devicePixelRatio || 1;

/* Resize canvas for all screens */
function resizeCanvas(){
    const rect = c.getBoundingClientRect();
    c.width = rect.width * dpr;
    c.height = rect.height * dpr;
    ctx.setTransform(dpr,0,0,dpr,0,0);
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

/* Music autoplay fix */
const bgMusic = document.getElementById("bgMusic");
document.addEventListener("click",()=>{
    bgMusic.play().catch(()=>{});
},{once:true});

/* Animation vars */
let manX = 80;
let girlX = 520;
let walk = 0;
let stage = "walk";
let tears = [];

const hearts = Array.from({length:30},()=>({
    x:Math.random()*600,
    y:600+Math.random()*300,
    s:Math.random()*1.2+.4
}));

function heart(h){
    ctx.fillStyle="rgba(255,90,160,.6)";
    ctx.beginPath();
    ctx.moveTo(h.x,h.y);
    ctx.bezierCurveTo(h.x-8,h.y-8,h.x-12,h.y+4,h.x,h.y+12);
    ctx.bezierCurveTo(h.x+12,h.y+4,h.x+8,h.y-8,h.x,h.y);
    ctx.fill();
    h.y-=h.s;
    if(h.y<-20) h.y=c.height/dpr+20;
}

function face(x,y,mode,color){
    ctx.strokeStyle=color;
    ctx.lineWidth=2;
    if(mode==="happy"){
        ctx.beginPath();ctx.arc(x,y+4,4,0,Math.PI);ctx.stroke();
    }else if(mode==="sad"){
        ctx.beginPath();ctx.arc(x,y+6,4,Math.PI,0);ctx.stroke();
    }else{
        ctx.beginPath();ctx.moveTo(x-4,y+5);ctx.lineTo(x+4,y+5);ctx.stroke();
    }
}

function man(x,y,mode){
    ctx.strokeStyle="#fff";ctx.lineWidth=5;
    ctx.beginPath();ctx.arc(x,y-50,14,0,Math.PI*2);ctx.stroke();
    face(x,y-50,stage==="no"?"sad":stage==="yes"?"happy":"neutral","#fff");
    ctx.beginPath();ctx.moveTo(x,y-35);ctx.lineTo(x,y);ctx.stroke();
    ctx.beginPath();ctx.moveTo(x,y);ctx.lineTo(x-10,y+40);ctx.stroke();
    ctx.beginPath();ctx.moveTo(x,y);ctx.lineTo(x+10,y+40);ctx.stroke();
}

function girl(x,y){
    ctx.strokeStyle="#ff5fa2";ctx.lineWidth=5;
    ctx.beginPath();ctx.arc(x,y-50,14,0,Math.PI*2);ctx.stroke();
    face(x,y-50,stage==="yes"?"happy":"neutral","#ff5fa2");
    ctx.beginPath();ctx.moveTo(x,y-35);ctx.lineTo(x,y);ctx.stroke();
    ctx.beginPath();ctx.moveTo(x,y);ctx.lineTo(x-10,y+40);ctx.stroke();
    ctx.beginPath();ctx.moveTo(x,y);ctx.lineTo(x+10,y+40);ctx.stroke();
}

function text(msg){
    ctx.fillStyle="#ffd6ef";
    ctx.textAlign="center";
    ctx.font = window.innerWidth<600?"18px Segoe UI":"26px Segoe UI";
    ctx.fillText(msg,c.width/(2*dpr),30);
}

function animate(){
    ctx.clearRect(0,0,c.width/dpr,c.height/dpr);
    hearts.forEach(heart);

    if(stage==="walk"){
        text("I have something for you ‚ù§Ô∏è");
        manX+=1;
        if(manX>260){
            stage="ask";
            document.getElementById("buttons").style.display="flex";
        }
    }
    if(stage==="ask") text("Will you be mine forever?");
    if(stage==="yes") text("She said YES üíñ");
    if(stage==="no") text("My heart is broken üíî");

    man(manX,180);
    girl(girlX,180);

    requestAnimationFrame(animate);
}
animate();

/* Buttons */
const yesVideo=document.getElementById("yesVideo");
const noVideo=document.getElementById("noVideo");
const box=document.getElementById("messageBox");

document.getElementById("yes").onclick=()=>{
    stage="yes";
    document.getElementById("buttons").style.display="none";
    setTimeout(()=>box.style.display="block",600);
};

document.getElementById("closeMessage").onclick=()=>{
    box.style.display="none";
    c.style.display="none";
    yesVideo.style.display="block";
    yesVideo.play();
};

document.getElementById("no").onclick=()=>{
    stage="no";
    document.getElementById("buttons").style.display="none";
    setTimeout(()=>{
        c.style.display="none";
        noVideo.style.display="block";
        noVideo.play();
    },2000);
};
</script>

</body>
</html>